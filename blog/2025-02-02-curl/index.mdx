---
slug: 2025-02-02-curl
date: 2025-02-02T23:00
title: "curlμΌλ΅ HTTP μ”μ²­ μ΄ν•΄ν•κΈ°"
authors: MinjiKim
tags: [http, network, web]
comments: true
---

## λ“¤μ–΄κ°€λ©°

E2E ν…μ¤νΈ μλ™ν™”λ¥Ό λ„μ…ν•λ©΄μ„ ν…μ¤νΈκ°€ μ™„λ£λ ν›„ Slack μ•λ¦Όμ„ μ „μ†΅ν•λ” μ‘μ—…μ„ μ§„ν–‰ν–μµλ‹λ‹¤. μ΄ κ³Όμ •μ—μ„ curlμ„ ν™μ©ν• HTTP μ”μ²­μ΄ ν•„μ”ν–κ³ , μµμ™ν•μ§€ μ•μ€ curl μ”μ²­ λ°©μ‹μ„ ν•™μµν•  μ μλ” μΆ‹μ€ κΈ°νκ°€ λμ—μµλ‹λ‹¤.

<!-- truncate -->

νΉν, `curl`μ verbose λ¨λ“(`-v`)λ¥Ό μ‚¬μ©ν•λ©΄ HTTP μ”μ²­μ μƒμ„Έν• νλ¦„μ„ μ‹¤μ‹κ°„μΌλ΅ ν™•μΈν•  μ μλ‹¤λ” μ μ΄ ν¥λ―Έλ΅μ› μµλ‹λ‹¤. ν‰μ† λ¨Έλ¦Ώμ†μΌλ΅λ§ μ΄ν•΄ν•κ³  μλ λ„¤νΈμ›ν¬ μ”μ²­ κ³Όμ •μ„ μ§μ ‘ λμΌλ΅ λ³Ό μ μμ–΄, HTTP μ”μ²­ λ””λ²„κΉ…μ— ν° λ„μ›€μ΄ λμ—μµλ‹λ‹¤.

μ΄λ² κΈ€μ—μ„λ” `curl`μ„ ν™μ©ν•μ—¬ **HTTP μ”μ²­μ„ μ΄ν•΄ν•λ” κ³Όμ •**μ„ μ •λ¦¬ν•κ³ , μ΄λ¥Ό ν†µν•΄ μ‹¤μ  λ¬Έμ λ¥Ό ν•΄κ²°ν–λ κ²½ν—μ„ κ³µμ ν•κ³ μ ν•©λ‹λ‹¤.

## curlμ΄λ€

curlμ€ URLμ„ ν†µν•΄ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κ±°λ‚ λ‹¤μ΄λ΅λ“ν•λ” λ…λ Ήμ–΄μ…λ‹λ‹¤. HTTP, HTTPS, FTP λ“±μ λ‹¤μ–‘ν• ν”„λ΅ν† μ½μ„ μ§€μ›ν•λ©°, API μ”μ²­ ν…μ¤νΈ λ° μλ™ν™”, νμΌ μ—…λ΅λ“ λ° λ‹¤μ΄λ΅λ“, HTTP μ”μ²­ λ””λ²„κΉ…μ— μ‚¬μ©λ©λ‹λ‹¤.

> curl κΈ°λ³Έ μ‚¬μ©λ²•


```bash
curl -X METHOD URL [OPTIONS]
```

- `-X METHOD`: HTTP λ©”μ„λ“(GET, POST, PUT, DELETE)
- `URL`: μ”μ²­ λ³΄λ‚Ό URL
- `[OPTIONS]`: ν—¤λ”, λ°μ΄ν„°, μΈμ¦ λ“± μ¶”κ°€ μ„¤μ •

<br />

### β…Β  **μ£Όμ” ν™μ© μ‚¬λ΅€**

> ####  GET μ”μ²­(λ°μ΄ν„° κ°€μ Έμ¤κΈ°)

    ```bash
     # κΈ°λ³Έ GET μ”μ²­
     PRODUCTS_URL=https://fakestoreapi.com/products/1
     curl -X GET ${PRODUCTS_URL}

     # μΏΌλ¦¬ νλΌλ―Έν„°λ΅ μ”μ²­
     SO_LIMITED_URL=https://fakestoreapi.com/products?limit=5
     curl -X GET ${SO_LIMITED_URL}

     # μ»¤μ¤ν…€ ν—¤λ” λ„£κΈ°
     SLACK_API=https://slack.com/api/files.getUploadURLExternal?filename=test.webm&length=594980
     curl -X GET -H "Authorization: YOUR_TOKEN" ${SLACK_API}
    ```

    - HTTP ν—¤λ” μ¶”κ°€: `-H "ν•„λ“λ…: κ°’β€`

<br />

>  #### POST μ”μ²­(λ°μ΄ν„° μ „μ†΅)

    ```bash
     # κΈ°λ³Έ POST μ”μ²­
     curl -X POST ${EXAMPLE_URL} \
        -H "Content-Type: application/json" \
        -d '{"name": "Alice", "email": "alswl99710@gmail.com"}'

     # URL μΈμ½”λ”©λ νΌ λ°μ΄ν„° μ „μ†΅
     curl -X POST ${LOGIN_URL} \
        -H "Content-Type: application/x-www-form-urlencoded" \
        -d "username=alswl99710&password=1234"

     # νΌ λ°μ΄ν„° ν•μ‹μΌλ΅ νμΌ μ—…λ΅λ“
     curl -X POST ${UPLOAD_URL} \
        -F "file=@image.jpg"

     # μ) νμΌ μ—…λ΅λ“
      curl -X POST ${UPLOAD_URL} \
          -H "Content-Type: video/webm" \
          --data-binary "@test.webm" -v

     # μ) μ¬λ™μ— νμΌ μ—…λ΅λ“ μ™„λ£ μ•λ ¤μ£ΌκΈ°
     curl -X POST -H "Authorization: MY_TOKEN" \
          -H "Content-Type: application/json" \
          --data '{
            "files": [{
              "id": "FILE_ID"
            }],
            "channel_id": "CHANNEL_ID",
            "initial_comment": "first_thing_to_say"
          }' https://slack.com/api/files.completeUploadExternal
    ```

     - `-d` λλ” `(β€”data)` : λ°μ΄ν„° μ „μ†΅
     - `-F` : `multiplart/form-data` νμΌ μ—…λ΅λ“

<br />

> #### PUT μ”μ²­(λ°μ΄ν„° μ—…λ°μ΄νΈ)
     ```bash
     # κΈ°λ³Έ PUT μ”μ²­: μ΄λ―Έ μ΅΄μ¬ν•λ” λ¦¬μ†μ¤ μ—…λ°μ΄νΈ
     curl -X PUT https://api.example.com/users/123 \
        -H "Content-Type: application/json" \
        -d '{"name": "Alice", "email": "alswl99710@gmail.com"}'

     # νμΌ μ—…λ΅λ“
     curl -X PUT https://example.com/upload/image.jpg \
        -H "Content-Type: image/jpeg" \
        --data-binary "@image.jpg"
    ```

     - `β€”data-binary` : raw νμΌ μ—…λ΅λ“

<br />

> #### DELETE μ”μ²­(λ°μ΄ν„° μ‚­μ )

     ```bash
     # κΈ°λ³Έ DELETE μ”μ²­
     curl -X DELETE https://api.example.com/users/123

     # μΈμ¦ν•μ—¬ μ‚­μ (λ³΄ν†µ μ‚­μ λ¥Ό μ„ν•΄μ„λ” authentication ν•„μ”)
     curl -X DELETE https://api.example.com/users/123 \
        -H "Authorization: Bearer YOUR_TOKEN"
    ```

<br />

> #### μΈμ¦ λ©”μ„λ“
     - `username:password` : μλ™μΌλ΅ κΈ°λ³Έ Basic Authλ¥Ό μ „μ†΅

        ```bash
        curl -u username:password https://api.com
        ```

     - Bearer ν† ν° μΈμ¦(OAuth): ν„λ€ APIμ—μ„ μμ£Ό μ‚¬μ©

        ```bash
        curl -H "AUthorization: Bearer YOUR_ACCESS_TOKEN" https://api.example.come/data
        ```

<br />

> #### μ‘λ‹µ μ²λ¦¬ λ° λ””λ²„κΉ…
     - μ‘λ‹µ ν—¤λ” ν‘μ‹(`-i` λλ” `β€”include`)

        ```bash
        curl -i https://api.example.com/data
        ```

     - URlμ΄ λ¦¬λ‹¤μ΄λ ‰νΈ(301, 302)ν•λ” κ²½μ° λ”°λΌκ°€λ„λ΅

        ```bash
        curl -L https://example.com
       ```

     - μ‘λ‹µμ„ νμΌμ— μ €μ¥: μ‘λ‹µ bodyλ¥Ό output.jsonμ— μ“°κΈ°

        ```bash
        curl -o output.json https://api.example.com/data
       ```

<br />

### Curl -vλ΅ μ΄ν•΄ν•λ” HTTP μ”μ²­ μμ„

```bash
curl -X GET ${PRODUCTS_URL} -v
```

    curlμ verbose λ¨λ“(-v)λ¥Ό μ‚¬μ©ν•λ©΄, HTTP μ”μ²­μ λ¨λ“  κ³Όμ •μ„ μƒμ„Έν ν™•μΈν•  μ μμµλ‹λ‹¤. κ° λ‹¨κ³„μ—μ„ λ¬΄μ—‡μ„ ν™•μΈν•΄μ•Όν•λ”μ§€ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

<br />

> #### DNS μ΅°ν λ° μ—°κ²°

```bash
* Host fakestoreapi.com:443 was resolved.
* IPv6: (none)
* IPv4: 104.21.32.1, 104.21.80.1, 104.21.48.1, 104.21.112.1, 104.21.96.1, 104.21.64.1, 104.21.16.1
*   Trying 104.21.32.1:443...
* Connected to fakestoreapi.com (104.21.32.1) port 443
```

    - DNS μ΅°ν λ° μ„λ²„ μ—°κ²° κ³Όμ •μ„ ν™•μΈ

    π”Β  μ΄ν•΄ν•κΈ°

        - DNS lookupμ΄ fakestoreapi.comμ„ IP μ£Όμ†λ΅ λ³€ν™ν•¨
        - `IPv4: μ—¬λ¬ IP`λ” λ΅λ“ λ°Έλ°μ‹±μ„ μλ―Έ
        - `Tryingβ€¦ `: ν¬νΈ 443μ IPμ— μ—°κ²°μ„ μ‹λ„
        - `Connected to ..`: TCP μ—°κ²°

    β…Β  ν™•μΈμ‚¬ν•­

        - DNS resolutionμ΄ μ‹¤ν¨ν•λ©΄, `Could not resolve host` μ—λ¬ λ°μƒ
        - μ—°κ²°μ΄ μ§€μ†λλ” κ²½μ°, `Connection timed out`
        - μ—¬λ¬ IPv4 μ£Όμ†κ°€ λ³΄μ΄λ” κ²½μ°, CDN(Content Delivery Network)μΌ κ°€λ¥μ„±μ΄ λ†’μ

<br />

> #### TLS/SSL ν•Έλ“μ‰μ΄ν¬

```bash
* ALPN: curl offers h2,http/1.1
* (304) (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/cert.pem
*  CApath: none
* (304) (IN), TLS handshake, Server hello (2):
* SSL connection using TLSv1.3 / AEAD-CHACHA20-POLY1305-SHA256
```

    - HTTPS μ”μ²­ μ‹ SSL μΈμ¦μ„ κ²€μ¦ κ³Όμ •μ„ ν™•μΈ

    π”Β  μ΄ν•΄ν•κΈ°

        - `ALPN: curl offers h2,http/1.1`: μ–΄ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ ν”„λ΅ν† μ½ ν‘μ(Application-Layer Protocol Negotiation)κ°€ HTTP/2 λλ” HTTP/1.1μ„ μ„ νƒν–μ
        - `TLS handshake, Client Hello`: ν΄λΌμ΄μ–ΈνΈκ°€ μ•μ „ν• TLS μ—°κ²°μ„ μ‹μ‘
        - `SSL connection using TLSv1.3`: μ•”νΈν™” λ©”μ„λ“(TLS 1.3)κ³Ό cipher suite κ°€ μ‚¬μ©λ¨

    β…Β  ν™•μΈ

        - SSL ν•Έλ“μ‰μ΄ν¬κ°€ μ‹¤ν¨ν• κ²½μ°, SSL certificate problem: unable to get local issuer certificate
        - TLS λ²„μ „μ΄ μ¤λλ κ²½μ°, TLS 1.2λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ β€”tlsv1.2λ¥Ό μ‚¬μ©ν•  κ²ƒ


<br />

:::note[**SSL μΈμ¦μ„**]

π’Β **SSL(=TLS) μΈμ¦μ„**

    - SSLμ€ μΈν„°λ„· νΈλν”½μ„ μ•”νΈν™”ν•κ³  μ„λ²„ μ‹ μ›μ„ ν™•μΈν•κΈ° μ„ν• ν”„λ΅ν† μ½λ΅, HTTPS μ›Ή μ£Όμ†κ°€ μλ” λ¨λ“  μ›Ή μ‚¬μ΄νΈμ—μ„λ” SSL/TLSλ¥Ό μ‚¬μ©ν•λ‹¤.
    - SSL μΈμ¦μ„λ” μ›Ήμ‚¬μ΄νΈμ μ‹ μ›μ„ ν™•μΈν•κ³ , λΈλΌμ°μ €-μ„λ²„ κ°„ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ” λ””μ§€ν„Έ λ³΄μ• μΈμ¦μ„
    - μ›Ή μ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•  κ²½μ°(`https://`), λΈλΌμ°μ €λ” SSL μΈμ¦μ„λ¥Ό ν™•μΈν•μ—¬ λ‹¤μμ„ λ³΄μ¥
        1. μ›Ήμ‚¬μ΄νΈκ°€ μ§„μ§ μ›Ήμ‚¬μ΄νΈμΈμ§€(ν”Όμ‹± μ‚¬μ΄νΈκ°€ μ•„λ‹μ§€)
        2. λ°μ΄ν„°κ°€ μ•”νΈν™”λμ–΄ μλ”μ§€(ν•΄μ»¤λ“¤λ΅λ¶€ν„° λ³΄νΈ)

π’Β `curl`μ—μ„ SSL μΈμ¦μ„λ€?

    - κΈ°λ³Έμ μΌλ΅, curlμ€ μ§„μ§ μ„λ²„μ™€ λ€ν™”ν•κ³  μμμ„ λ³΄μ¥ν•κΈ° μ„ν•΄ SSL μΈμ¦μ„λ¥Ό ν™•μΈν•¨.
    - λ§μ•½ curlμ΄ μ ν¨ν•μ§€ μ•μ€ SSL μΈμ¦μ„λ¥Ό ν™•μΈν•λ©΄, μ•„λμ™€ κ°™μ€ μ—λ¬ λ°μƒ
        ```bash
        curl: (60) SSL certificate problem: unable to get local issuer certificate
        ```
:::

<br />

> #### μ„λ²„ SSL μΈμ¦μ„ μƒμ„Έ

```bash
* Server certificate:
*  subject: CN=fakestoreapi.com
*  start date: Dec 30 13:34:58 2024 GMT
*  expire date: Mar 30 14:33:14 2025 GMT
*  SSL certificate verify ok.
```

    π”Β μ΄ν•΄ν•κΈ°

        - `subject: CN=fakestoreapi.com`: λ„λ©”μΈμ SSL μΈμ¦μ„κ°€ μ ν¨ν•¨
        - s`tart date / expire date`: μ ν¨κΈ°κ°„μ΄ μ§€λ‚¬μ„ κ²½μ°, SSL μ—λ¬ λ°μƒ
        - `SSL certificate verify ok` : SSL μΈμ¦μ„λ” μ ν¨ν•¨

    β…Β ν™•μΈ

        - μΈμ¦μ„κ°€ μ ν¨κΈ°κ°„μ΄ μ§€λ‚¬μ„ κ²½μ°: SSL certificate has expired.
        - λ„λ©”μΈμ΄ μΌμΉν•μ§€ μ•μ€ κ²½μ°: Hostname mismactch

<br />

>  #### HTTP μ”μ²­ μ „μ†΅

```bash
* [HTTP/2] [1] OPENED stream for https://fakestoreapi.com/products/1
* [HTTP/2] [1] [:method: GET]
* [HTTP/2] [1] [:path: /products/1]
* [HTTP/2] [1] [:authority: fakestoreapi.com]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [user-agent: curl/8.7.1]
* [HTTP/2] [1] [accept: */*]
> GET /products/1 HTTP/2
> Host: fakestoreapi.com
> User-Agent: curl/8.7.1
> Accept: */*
```

    π”Β μ΄ν•΄ν•κΈ°

        - `> GET /products/1 HTTP/2`: HTTP GET μ”μ²­
        - `Host: fakestoreapi.com`: μ”μ²­ λ°›μ€ μ„λ²„
        - `User-Agent: curl/8.7.1`: ν΄λΌμ΄μ–ΈνΈ
        - `Accept: */*` ν΄λΌμ΄μ–ΈνΈλ” λ¨λ“  μ‘λ‹µ ν•μ‹μ„ ν—μ©

    β…Β  ν™•μΈ

        - APIκ°€ μΈμ¦μ„ ν•„μ”λ΅ ν•λ” κ²½μ°(401 Unauthorized), ν—¤λ”μ— Authorizationμ„   μ¶”κ°€ν•΄μ•Όν•¨

<br />

> **HTTP μ‘λ‹µ μƒνƒ λ° ν—¤λ” ν™•μΈ**

```bash
< HTTP/2 200
< date: Sun, 02 Feb 2025 11:38:57 GMT
< content-type: application/json; charset=utf-8
< content-length: 364
< access-control-allow-origin: *
< etag: W/"16c-MMdrqY6N0sTiefLdsgtBej9eunY"
< x-powered-by: Express
< cf-cache-status: DYNAMIC
< server: cloudflare
```

    π”Β μ΄ν•΄ν•κΈ°

        - `HTTP/2 200`: μ„±κ³µ(200 OK)
        - `content-type: application/json`: JSON μ‘λ‹µμ„
        - `content-length: 364` μ‘λ‹µ ν¬κΈ°
        - `< access-control-allow-origin: *` CORSκ°€ ν—μ©λ¨
        - `< cf-cache-status: DYNAMIC` Cloudflareμ— μν•΄ μΊμ‹±λμ§€ μ•μ
        - `etag:` μΊμ‹±μ— μ‚¬μ©

    β…Β ν™•μΈ

        - λ§μ•½ 403 Forbidden λλ” 401 Unauthorizedλ¥Ό λ°›λ” κ²½μ°,μ•„λμ μμ •μ΄ ν•„μ”ν•  μ μμ.
          - Authentication ν—¤λ”(Authorization: Bearer YOUR_TOKEN)
          - μΏ ν‚¤(-H β€Cookie: sessionid=12345β€)
          - User-Agent λ³€κ²½(μΌλ¶€ APIλ” curl agentλ¥Ό μ°¨λ‹¨ν•κΈ°λ„ ν•¨)

6οΈβƒ£Β **HTTP μ‘λ‹µ λ°”λ””**

```bash
{
  "id": 1,
  "title": "Fjallraven - Foldsack No. 1 Backpack, Fits 15 Laptops",
  "price": 109.95,
  "description": "Your perfect pack for everyday use...",
  "category": "men's clothing",
  "image": "https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg",
  "rating": { "rate": 3.9, "count": 120 }
}
```

    π”Β μ΄ν•΄ν•κΈ°

    - μ‘λ‹µ λ°  μ΄ν„°λ” μ ν¨ν• JSON κ°μ²΄λ΅, id, title, price.. λ“±μ ν‚¤λ¥Ό κ°€μ§.

    β…Β ν™•μΈ

        - μ‘λ‹µ λ°”λ””κ°€ λΉ„μ–΄μλ” κ²½μ°(`{}`), νλΌλ―Έν„°κ°€ λ„λ½λ κ²ƒμΌ μ μμ.
        - JSONμ΄ μ•„λ‹ κ²½μ°, Content-Type ν—¤λ”λ¥Ό ν™•μΈν•  κ²ƒ.
        - `301/302 Redirect but no response` μ—λ¬ λ°μƒν•λ” κ²½μ°, `-L(β€”location)` μµμ…μΌλ΅ μ‹¤ν–‰

          ```bash
          # -L μ—†μ΄ μ”μ²­ν•λ” κ²½μ°
          curl https://short.url/example

          # μ”μ²­μ΄ λ¦¬λ‹¤μ΄λ ‰νΈμ—μ„ λ©μ¶ κ²½μ°
          HTTP/1.1 301 Moved Permanently
          Location: https://example.com/real-url

          # λ¦¬λ‹¤μ΄λ ‰νΈν•  μ μλ„λ΅ μ”μ²­
          curl -L https://short.url/example
            ```

        - JSON ν•μ‹μ΄ μλ»λ κ²½μ°, ν¬λ§·ν…ν•κΈ°

          ```bash
          curl -s ${URL} | jq
            ```
<br />

### λ‚κ°€λ©°

μ΄μ „κΉμ§€λ” `fetch` APIλ¥Ό μ‚¬μ©ν•΄ HTTP μ”μ²­μ„ λ³΄λ‚΄λ” κ²ƒμ΄ μµμ™ν–μ§€λ§, μ΄λ² κ²½ν—μ„ ν†µν•΄ `curl`μ„ ν™μ©ν• CLI μ”μ²­μ„ λ³΄λ‹¤ κΉμ΄ μ΄ν•΄ν•  μ μμ—μµλ‹λ‹¤. νΉν, `-v` λ¨λ“λ¥Ό μ‚¬μ©ν•λ©΄ λ„¤νΈμ›ν¬ μ”μ²­ κ³Όμ •μ„ **μ‹κ°μ μΌλ΅ ν™•μΈν•λ©° λ””λ²„κΉ…ν•  μ μλ‹¤λ” μ **μ΄ λ§¤μ° μ μ©ν–μµλ‹λ‹¤. μ•μΌλ΅ API ν…μ¤νΈ, λ””λ²„κΉ…, νμΌ μ—…λ΅λ“ λ“± λ‹¤μ–‘ν• μ›ν¬ν”λ΅μ°μ—μ„ μ΄λ¥Ό ν™μ©ν•  μ μμ„ κ²ƒμ…λ‹λ‹¤.

μƒλ΅μ΄ ν• ν•΄κ°€ μ‹μ‘λμ—μµλ‹λ‹¤. μ΄λ¬ν• μ‘μ€ λ°°μ›€μ΄ μ“μ—¬ ν° μ„±μ¥μ„ μ΄λ£¬λ‹¤λ” λ§μμΌλ΅, λ” λ‚μ€ κ°λ°μλ΅ ν• κ±Έμμ”© λ‚μ•„κ°€λ ¤ ν•©λ‹λ‹¤. μ¬ν•΄λ„ κΎΈμ¤€ν λ°°μ°κ³  μ„±μ¥ν•λ©°, λ” μΆ‹μ€ μ½”λ“μ™€ μ›Ή μ „λ°μ„ μ΄ν•΄ν•΄λ‚κ°€λ„λ΅ ν•κ² μµλ‹λ‹¤. ν™”μ΄ν…μ…λ‹λ‹¤. π„